<?xml version="1.0" encoding="Shift_JIS"?>
<project name="comp_sync_sample" default="regsync" basedir=".">
	<property name="src" location="../test_fr" />
	<property name="dst" location="../test_to" />

	<!--ant1.6から使用可能な方法-->
	<typedef resource="typedef.properties" classpath="../classes" />
	<!--<typedef resource="typedef.properties" classpath="hmant.jar" />-->
	<!--
	<taskdef name="compsync" classname="jp.hishidama.ant.taskdefs.CompareSync" classpath="../classes" />
	<typedef name="filesmatch.text" classname="jp.hishidama.ant.taskdefs.condition.TextFilesMatch" classpath="../classes" />
	<typedef name="filesmatch.reg" classname="jp.hishidama.ant.taskdefs.condition.RegexpFilesMatch" classpath="../classes" />
	-->
	<target name="regsync">
		<compsync todir="${dst}">
			<fileset dir="${src}" defaultexcludes="no" />
			<!--<filesmatch />-->
			<!--<filesmatch.text />-->
			<!--<filesmatch.text encoding1="MS932" encoding2="MS932" />-->
			<!--<filesmatch.reg regexp="\$$Date.*\$$" />-->
			<!--<filesmatch.reg format="%Y/%M/%D %H:%m:%S" />-->
			<filesmatch.reg>
				<fileset dir="${src}" />
				<expression format="%Y/%M/%D %H:%m:%S" />
				<expression regexp="\$$Date.*\$$" />
				<expression format="%3s %3s %D %H:%m:%S %3s %Y" />
			</filesmatch.reg>
		</compsync>
	</target>

	<target name="sync">
		<compsync todir="${dst}">
			<fileset dir="${src}" defaultexcludes="no" />
			<filesmatch.text />
		</compsync>
	</target>

	<target name="cvs_sync">
		<compsync todir="${dst}">
			<fileset dir="${src}" defaultexcludes="no" />
			<filesmatch.reg regexp="\$$\w+.*?\$$">
				<fileset dir="${src}" />
			</filesmatch.reg>
		</compsync>
	</target>

	<target name="javadoc_sync">
		<compsync todir="${dst}">
			<fileset dir="${src}" />
			<filesmatch.reg>
				<expression format="Generated by javadoc %s on %3s %3s %D %H:%m:%S JST %Y" />
				<expression format='META NAME="date" CONTENT="%Y-%M-%D"' />
			</filesmatch.reg>
		</compsync>
	</target>

	<target name="log_sync">
		<compsync todir="${dst}" execsync="no">
			<fileset dir="${src}" />
			<log file="log.txt" property="compsync.log.properties">
				<param name="cp" value="copy %s %d" />
				<param name="no" value="rem copy %s %d" />
				<param name="rm_df" value="del %d" />
				<param name="rm_dd" value="rmdir %d" />
			</log>
		</compsync>
	</target>

	<target name="diff">
		<!--<delete dir="../test_bak"/>
		<mkdir dir="../test_bak"/>-->
		<compsync todir="${dst}" includeemptydirs="yes" execsync="yes" >
			<fileset dir="${src}" />
			<backup newdir="../test_bak/add" olddir="../test_bak/old" deldir="../test_bak/del" />
		</compsync>
	</target>

</project>
